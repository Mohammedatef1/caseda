generator client {
  provider      = "prisma-client-js"
  output        = "./generated/prisma"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Color {
  red
  blue
  black
}

enum Model {
  iphonex
  iphone11
  iphone12
  iphone13
  iphone14
  iphone15
}

enum Material {
  silicon
  polycarbonate
}

enum Finish {
  smooth
  texture
}

enum OrderStatus {
  fulfilled
  shipped
  waiting_shipment
}

model Configuration {
  id              String  @id @default(cuid())
  width           Int
  height          Int
  imgUrl          String
  croppedImageUrl String?
  color           String?
  model           String?
  finish          String?
  material        String?
  price           Int?
  Order           Order[]
}

model Order {
  id              String        @id @default(cuid())
  configuration   Configuration @relation(fields: [configurationId], references: [id])
  configurationId String
  amount          Float
  isPaid          Boolean       @default(false)
  status          OrderStatus   @default(waiting_shipment)

  shippingAddress   ShippingAddress? @relation(fields: [shippingAddressId], references: [id])
  shippingAddressId String?
  billingAddress    BillingAddress?  @relation(fields: [billingAddressId], references: [id])
  billingAddressId  String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ShippingAddress {
  id          String  @id @default(cuid())
  name        String
  street      String
  city        String
  postalCode  String
  country     String
  State       String?
  phoneNumber String?
  order       Order[]
}

model BillingAddress {
  id          String  @id @default(cuid())
  name        String
  street      String
  city        String
  postalCode  String
  country     String
  State       String?
  phoneNumber String?
  order       Order[]
}
